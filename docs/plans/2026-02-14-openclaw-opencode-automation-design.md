# OpenClaw + OpenCode é¡¹ç›®çº§è‡ªåŠ¨åŒ–è®¾è®¡

> åˆ›å»ºæ—¥æœŸ: 2026-02-14
> çŠ¶æ€: å·²ç¡®è®¤

## 1. æ¦‚è¿°

### 1.1 ç›®æ ‡

æ„å»ºä¸€ä¸ªä»¥ OpenClaw ä¸º"å¤§è„‘"ã€OpenCode ä¸º"æ‰§è¡Œæ‰‹"çš„é¡¹ç›®çº§è‡ªåŠ¨åŒ–ç³»ç»Ÿï¼Œè¦†ç›–ï¼š
- é¡¹ç›®çº§è‡ªåŠ¨åŒ–å¼€å‘
- æµ‹è¯•
- æœ¬åœ°æŒä¹…éƒ¨ç½²
- è¿ç»´

### 1.2 æ ¸å¿ƒåˆ†å·¥

| é˜¶æ®µ | OpenClaw (å¤§è„‘/è°ƒåº¦) | OpenCode (æ‰§è¡Œ/æ‰‹) |
|------|---------------------|-------------------|
| éœ€æ±‚åˆ†æ | âœ… è§£æç”¨æˆ·æ„å›¾ã€æ‹†è§£ä»»åŠ¡ | âŒ |
| ä»»åŠ¡è°ƒåº¦ | âœ… åˆ†é…ä»»åŠ¡ã€ç®¡ç†ä¾èµ– | âŒ |
| ä»£ç å¼€å‘ | âŒ | âœ… ç¼–å†™/ä¿®æ”¹ä»£ç  |
| æµ‹è¯•æ‰§è¡Œ | âœ… è§¦å‘æµ‹è¯• | âœ… ç¼–å†™æµ‹è¯•ç”¨ä¾‹ |
| æœ¬åœ°éƒ¨ç½² | âœ… åè°ƒéƒ¨ç½²æµç¨‹ | âœ… æ‰§è¡Œéƒ¨ç½²è„šæœ¬ |
| è¿ç»´ç›‘æ§ | âœ… ç›‘æ§å‘Šè­¦ã€å†³ç­– | âœ… ä¿®å¤é—®é¢˜ |

---

## 2. ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        OpenClaw (å¤§è„‘)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Telegram   â”‚  Heartbeat  â”‚  DAG Skill  â”‚  Session Manager â”‚
â”‚  é€šçŸ¥å…¥å£    â”‚  å®šæ—¶è°ƒåº¦    â”‚  åŠ¨æ€ç¼–æ’    â”‚  ä¸Šä¸‹æ–‡ç®¡ç†       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚             â”‚             â”‚               â”‚
       â–¼             â–¼             â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     OpenCode CLI (æ‰§è¡Œå±‚)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä»£ç å¼€å‘    â”‚  æµ‹è¯•ç¼–å†™    â”‚  éƒ¨ç½²æ‰§è¡Œ    â”‚  è¿ç»´ä¿®å¤        â”‚
â”‚  (Session)  â”‚  (Session)  â”‚  (Bash)     â”‚  (Session)       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚             â”‚             â”‚               â”‚
       â–¼             â–¼             â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é¡¹ç›®ç¯å¢ƒ (workdir + nvm + uv)              â”‚
â”‚  project-a/    project-b/    project-c/    ...              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.1 æ ¸å¿ƒæµç¨‹

1. ç”¨æˆ·é€šè¿‡ Telegram å‘é€ä»»åŠ¡è¯·æ±‚ï¼ˆæ— éœ€äºŒæ¬¡ç¡®è®¤ï¼‰
2. OpenClaw è§£ææ„å›¾ï¼Œè®©æ¨¡å‹ç”Ÿæˆ DAG DSL
3. DAG Skill è§£æå¹¶æ‰§è¡Œ DAG
4. æ¯ä¸ª OpenCode ä»»åŠ¡å¤ç”¨ Session ä¿æŒä¸Šä¸‹æ–‡
5. çŠ¶æ€å˜æ›´å®æ—¶é€šè¿‡ Telegram é€šçŸ¥
6. å®Œæˆåè‡ªåŠ¨å†™å…¥è®°å¿†

---

## 3. è§¦å‘æ–¹å¼

### 3.1 æ··åˆè§¦å‘æ¨¡å¼

| è§¦å‘æº | åœºæ™¯ | ç‰¹ç‚¹ |
|--------|------|------|
| Telegram | å³æ—¶ä»»åŠ¡ï¼Œç”¨æˆ·å¯¹è¯ | å®æ—¶å“åº” |
| Heartbeat | å®šæ—¶ä»»åŠ¡ï¼Œæ—¥å¸¸è¿ç»´ | è‡ªåŠ¨æ‰§è¡Œ |
| API/Webhook | äº‹ä»¶é©±åŠ¨ï¼Œå¤–éƒ¨é›†æˆ | è¢«åŠ¨è§¦å‘ |

### 3.2 è§¦å‘æºç»Ÿä¸€æ¥å…¥ DAG Executor

æ‰€æœ‰è§¦å‘æºæœ€ç»ˆéƒ½é€šè¿‡ DAG Executor ç»Ÿä¸€æ‰§è¡Œï¼Œç¡®ä¿ä¸€è‡´çš„è¡Œä¸ºã€‚

---

## 4. DAG Skill è®¾è®¡

### 4.1 æ–‡ä»¶ä½ç½®

`skills/dag-executor/SKILL.md`

### 4.2 DAG DSL è§„èŒƒ

```yaml
dag:
  name: string              # DAG åç§°
  workspace: string         # å·¥ä½œç›®å½•
  session_prefix: string    # OpenCode session å‰ç¼€ï¼ˆç”¨äºå¤ç”¨ï¼‰
  max_runtime: 1h           # æœ€å¤§è¿è¡Œæ—¶é—´
  
  tasks:
    - id: string            # ä»»åŠ¡å”¯ä¸€æ ‡è¯†
      type: opencode | bash # æ‰§è¡Œç±»å‹
      depends_on: string[]  # ä¾èµ–çš„ä»»åŠ¡ ID
      prompt: string        # opencode ç±»å‹æ—¶çš„æç¤ºè¯
      command: string       # bash ç±»å‹æ—¶çš„å‘½ä»¤
      retry: number         # é‡è¯•æ¬¡æ•°ï¼Œé»˜è®¤ 2
      timeout: number       # å•ä»»åŠ¡è¶…æ—¶ç§’æ•°
      
  on_failure:
    strategy: retry | auto_fix | pause  # å¤±è´¥ç­–ç•¥
    notify: boolean         # æ˜¯å¦é€šçŸ¥
```

### 4.3 æ‰§è¡Œé€»è¾‘

1. è§£æ YAMLï¼ŒéªŒè¯è¯­æ³•
2. æ‹“æ‰‘æ’åºä»»åŠ¡
3. æŒ‰é¡ºåºæ‰§è¡Œï¼Œæ— ä¾èµ–çš„å¯å¹¶è¡Œ
4. å¤±è´¥æ—¶æ‰§è¡Œä¸‰çº§æ¢å¤ç­–ç•¥
5. æ¯ä¸ªä»»åŠ¡å®Œæˆ/å¤±è´¥æ—¶å‘é€ Telegram é€šçŸ¥

---

## 5. OpenCode Session ç®¡ç†

### 5.1 Session ç”Ÿå‘½å‘¨æœŸ

```
é¡¹ç›®åˆå§‹åŒ– â†’ åˆ›å»ºé¡¹ç›®çº§ Session â†’ ä»»åŠ¡1(å¤ç”¨) â†’ ä»»åŠ¡2(å¤ç”¨) â†’ ...
```

### 5.2 Session å‘½åè§„èŒƒ

| Session ID æ ¼å¼ | ç”¨é€” |
|-----------------|------|
| `ses_proj_{name}_main` | é¡¹ç›®ä¸» sessionï¼Œé•¿æœŸå­˜åœ¨ |
| `ses_proj_{name}_feat_{feature}` | åŠŸèƒ½å¼€å‘ sessionï¼Œä¸´æ—¶ |
| `ses_proj_{name}_fix_{issue}` | Bug ä¿®å¤ sessionï¼Œä¸´æ—¶ |
| `ses_proj_{name}_ops` | è¿ç»´ sessionï¼Œé•¿æœŸå­˜åœ¨ |

### 5.3 Session å­˜å‚¨ä½ç½®

OpenClaw ç»´æŠ¤ä¸€ä¸ª Session Registryï¼ˆJSON æ–‡ä»¶ï¼‰ï¼Œè®°å½•ï¼š
- session_id
- é¡¹ç›®
- åˆ›å»ºæ—¶é—´
- æœ€åä½¿ç”¨æ—¶é—´
- ç”¨é€”

### 5.4 æ··åˆä¸Šä¸‹æ–‡æ–¹æ¡ˆï¼ˆæç«¯æƒ…å†µï¼‰

å½“ Session ä¸Šä¸‹æ–‡ä¸è¶³æ—¶ï¼š
```yaml
context_injection:
  - type: file
    path: AGENTS.md          # é¡¹ç›®çº§é™æ€ä¸Šä¸‹æ–‡
  - type: file
    path: docs/api-spec.md   # ä»»åŠ¡ç›¸å…³æ–‡æ¡£
  - type: session
    id: ses_proj_x_main      # å¤ç”¨ç°æœ‰ session
```

---

## 6. é”™è¯¯å¤„ç†ä¸æ¢å¤

### 6.1 ä¸‰çº§æ¢å¤ç­–ç•¥

```
ä»»åŠ¡æ‰§è¡Œå¤±è´¥
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Level 1: é‡è¯•   â”‚  æœ€å¤š 2 æ¬¡ï¼Œé—´éš” 5 ç§’
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ ä»ç„¶å¤±è´¥
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Level 2: è‡ªåŠ¨ä¿®å¤ â”‚  OpenCode åˆ†æé”™è¯¯å¹¶ä¿®å¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ ä»ç„¶å¤±è´¥
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Level 3: äººå·¥ä»‹å…¥ â”‚  æš‚åœ DAGï¼ŒTelegram é€šçŸ¥
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 è‡ªåŠ¨ä¿®å¤æµç¨‹

```yaml
auto_fix:
  steps:
    - action: opencode
      prompt: |
        ä»»åŠ¡æ‰§è¡Œå¤±è´¥äº†ï¼Œè¯·åˆ†æé”™è¯¯å¹¶ä¿®å¤ï¼š
        
        ä»»åŠ¡: {task.prompt}
        é”™è¯¯è¾“å‡º: {error_output}
        
        è¯·ï¼š
        1. åˆ†æå¤±è´¥åŸå› 
        2. ä¿®å¤ä»£ç æˆ–é…ç½®
        3. é‡æ–°æ‰§è¡Œå¤±è´¥çš„æ­¥éª¤éªŒè¯ä¿®å¤
        
      session: {current_session}
```

### 6.3 äººå·¥ä»‹å…¥

```yaml
manual_intervention:
  actions:
    - pause_dag: true
    - notify:
        channel: telegram
        message: |
          ğŸš¨ DAG æ‰§è¡Œå¤±è´¥ï¼Œéœ€è¦äººå·¥ä»‹å…¥
          
          DAG: {dag_name}
          å¤±è´¥ä»»åŠ¡: {task_id}
          é”™è¯¯: {error_summary}
          
          å›å¤ "continue" ç»§ç»­
          å›å¤ "skip" è·³è¿‡æ­¤ä»»åŠ¡
          å›å¤ "abort" ç»ˆæ­¢ DAG
    - wait_for_input: true
```

---

## 7. Telegram é€šçŸ¥ä¸äº¤äº’

### 7.1 é€šçŸ¥æ ¼å¼

| äº‹ä»¶ | é€šçŸ¥æ ¼å¼ |
|------|----------|
| DAG å¼€å§‹ | `ğŸš€ [é¡¹ç›®å] DAG å¼€å§‹: {dag_name}` |
| ä»»åŠ¡å¼€å§‹ | `â³ [{dag_name}] ä»»åŠ¡å¼€å§‹: {task_id}` |
| ä»»åŠ¡å®Œæˆ | `âœ… [{dag_name}] ä»»åŠ¡å®Œæˆ: {task_id} ({duration})` |
| ä»»åŠ¡é‡è¯• | `ğŸ”„ [{dag_name}] ä»»åŠ¡é‡è¯•: {task_id} (ç¬¬{n}æ¬¡)` |
| è‡ªåŠ¨ä¿®å¤ | `ğŸ”§ [{dag_name}] è‡ªåŠ¨ä¿®å¤ä¸­: {task_id}` |
| éœ€è¦äººå·¥ | `ğŸš¨ [{dag_name}] éœ€è¦äººå·¥ä»‹å…¥: {task_id}` |
| DAG å®Œæˆ | `ğŸ‰ [{dag_name}] DAG å®Œæˆ! æ€»è€—æ—¶: {duration}` |
| DAG å¤±è´¥ | `âŒ [{dag_name}] DAG å¤±è´¥: {reason}` |

### 7.2 äº¤äº’å‘½ä»¤

| å‘½ä»¤ | ä½œç”¨ |
|------|------|
| `/dag status` | æŸ¥çœ‹å½“å‰ DAG çŠ¶æ€ |
| `/dag continue` | ç»§ç»­æš‚åœçš„ DAG |
| `/dag skip {task_id}` | è·³è¿‡æŒ‡å®šä»»åŠ¡ |
| `/dag retry {task_id}` | é‡è¯•æŒ‡å®šä»»åŠ¡ |
| `/dag abort` | ç»ˆæ­¢å½“å‰ DAG |

### 7.3 æ— äºŒæ¬¡ç¡®è®¤

ç”¨æˆ·å‘é€ä»»åŠ¡åï¼Œç›´æ¥ç”Ÿæˆ DAG å¹¶æ‰§è¡Œï¼Œæ— éœ€ç¡®è®¤ã€‚

---

## 8. è®°å¿†ç³»ç»Ÿ

### 8.1 è®°å¿†å­˜å‚¨ç»“æ„

```yaml
memory:
  - id: mem_001
    timestamp: 2026-02-14T10:30:00Z
    type: dag_completion
    project: daily-finance-auto
    dag_name: add-sina-finance-source
    summary: æ·»åŠ äº†æ–°æµªè´¢ç»æ•°æ®æº
    details:
      - æ–°å¢æ–‡ä»¶: src/sources/sina_finance.py
      - æ–°å¢æµ‹è¯•: tests/test_sina_finance.py
    session_id: ses_proj_daily_finance_main
```

### 8.2 è®°å¿†ç±»å‹

| ç±»å‹ | æè¿° | è§¦å‘æ—¶æœº |
|------|------|----------|
| `dag_completion` | DAG å®Œæˆè®°å½• | DAG æˆåŠŸç»“æŸ |
| `dag_failure` | DAG å¤±è´¥è®°å½• | DAG æœ€ç»ˆå¤±è´¥ |
| `issue_resolved` | é—®é¢˜è§£å†³è®°å½• | è‡ªåŠ¨ä¿®å¤æˆåŠŸ |
| `project_state` | é¡¹ç›®çŠ¶æ€å¿«ç…§ | é‡è¦å˜æ›´å |
| `learning` | å­¦åˆ°çš„çŸ¥è¯† | å‘ç°æ–°æ¨¡å¼æ—¶ |

### 8.3 è®°å¿†å¼•ç”¨

æ–°ä»»åŠ¡æ‰§è¡Œæ—¶ï¼ŒOpenClaw è‡ªåŠ¨æŸ¥æ‰¾ç›¸å…³è®°å¿†ï¼Œå¤ç”¨ä¸Šä¸‹æ–‡ã€‚

---

## 9. Heartbeat å®šæ—¶è°ƒåº¦

### 9.1 é…ç½®ç¤ºä¾‹

```yaml
heartbeat:
  schedules:
    - id: daily-fund-sync
      cron: "0 9 * * 1-5"  # å·¥ä½œæ—¥æ—© 9 ç‚¹
      skip_if_running: true
      max_runtime: 1h
      on_missed: notify
      dag:
        name: daily-fund-sync
        workspace: ~/projects/daily-finance-auto
        session_prefix: daily_finance
        tasks:
          - id: fetch_data
            type: opencode
            prompt: "æ‹‰å–ä»Šæ—¥æ‰€æœ‰åŸºé‡‘çš„å‡€å€¼æ•°æ®"
          - id: analyze
            type: opencode
            depends_on: [fetch_data]
            prompt: "åˆ†æä»Šæ—¥æ•°æ®ï¼Œè¯†åˆ«å¼‚å¸¸æ³¢åŠ¨"
          - id: report
            type: opencode
            depends_on: [analyze]
            prompt: "ç”Ÿæˆç®€æŠ¥å¹¶å‘é€åˆ° Telegram"
```

### 9.2 ç‰¹æœ‰é…ç½®

| é…ç½® | æè¿° |
|------|------|
| `skip_if_running` | ä¸Šä¸€ä¸ª DAG è¿˜åœ¨è¿è¡Œæ—¶è·³è¿‡ |
| `max_runtime` | æœ€å¤§è¿è¡Œæ—¶é—´ (1h) |
| `on_missed` | é”™è¿‡çš„æ‰§è¡Œå¦‚ä½•å¤„ç† (notify) |

---

## 10. é¡¹ç›®ç¯å¢ƒéš”ç¦»

### 10.1 éš”ç¦»æ–¹æ¡ˆ

- **workdir**: æ¯ä¸ªé¡¹ç›®ç‹¬ç«‹ç›®å½•
- **nvm**: Node.js ç‰ˆæœ¬ç®¡ç†
- **uv venv**: Python è™šæ‹Ÿç¯å¢ƒ

### 10.2 å®‰å…¨æ€§

å†…ç½‘ç¯å¢ƒï¼Œå®Œå…¨ä¿¡ä»»ï¼Œå…¨è‡ªåŠ¨åŒ–æ‰§è¡Œã€‚

---

## 11. å®ç°è®¡åˆ’

### 11.1 Skills ç›®å½•ç»“æ„

```
skills/
â”œâ”€â”€ dag-executor/
â”‚   â”œâ”€â”€ SKILL.md
â”‚   â””â”€â”€ templates/
â”‚       â””â”€â”€ dag-dsl.yaml
â”œâ”€â”€ opencode-session-manager/
â”‚   â””â”€â”€ SKILL.md
â”œâ”€â”€ memory-writer/
â”‚   â””â”€â”€ SKILL.md
â””â”€â”€ telegram-dag-interaction/
    â””â”€â”€ SKILL.md
```

### 11.2 å®ç°é˜¶æ®µ

```
Phase 1: æ ¸å¿ƒèƒ½åŠ› (Week 1)
â”œâ”€â”€ 1.1 åˆ›å»º dag-executor skill
â”œâ”€â”€ 1.2 å®ç° DAG DSL è§£æ
â”œâ”€â”€ 1.3 å®ç°æ‹“æ‰‘æ’åºæ‰§è¡Œ
â””â”€â”€ 1.4 åŸºç¡€ Telegram é€šçŸ¥

Phase 2: é”™è¯¯å¤„ç† (Week 2)
â”œâ”€â”€ 2.1 é‡è¯•æœºåˆ¶
â”œâ”€â”€ 2.2 è‡ªåŠ¨ä¿®å¤æµç¨‹
â”œâ”€â”€ 2.3 äººå·¥ä»‹å…¥äº¤äº’
â””â”€â”€ 2.4 max_runtime è¶…æ—¶æ§åˆ¶

Phase 3: Session + è®°å¿† (Week 3)
â”œâ”€â”€ 3.1 opencode-session-manager
â”œâ”€â”€ 3.2 Session æ³¨å†Œè¡¨
â”œâ”€â”€ 3.3 memory-writer skill
â””â”€â”€ 3.4 è®°å¿†æŸ¥è¯¢é›†æˆ

Phase 4: Heartbeat é›†æˆ (Week 4)
â”œâ”€â”€ 4.1 å®šæ—¶ DAG è§¦å‘
â”œâ”€â”€ 4.2 skip_if_running é€»è¾‘
â””â”€â”€ 4.3 on_missed å¤„ç†
```

---

## 12. å®Œæ•´ç¤ºä¾‹

### 12.1 ç”¨æˆ·å‘èµ·ä»»åŠ¡

```
ç”¨æˆ·: å¸®æˆ‘åœ¨ daily-finance-auto é¡¹ç›®æ·»åŠ ä¸€ä¸ªä¸œè´¢åŸºé‡‘æ•°æ®æºï¼Œ
     éœ€è¦æ”¯æŒå…¬å‹ŸåŸºé‡‘å’Œç§å‹ŸåŸºé‡‘çš„å‡€å€¼è·å–
```

### 12.2 ç³»ç»Ÿå“åº”

```
ğŸš€ daily-finance-auto DAG å¼€å§‹: add-eastmoney-fund-source

â³ ä»»åŠ¡å¼€å§‹: analyze
âœ… ä»»åŠ¡å®Œæˆ: analyze (45s)

â³ ä»»åŠ¡å¼€å§‹: implement
âœ… ä»»åŠ¡å®Œæˆ: implement (3m 20s)

â³ ä»»åŠ¡å¼€å§‹: test
âœ… ä»»åŠ¡å®Œæˆ: test (1m 15s)

â³ ä»»åŠ¡å¼€å§‹: deploy
âœ… ä»»åŠ¡å®Œæˆ: deploy (8s)

ğŸ‰ DAG å®Œæˆ! æ€»è€—æ—¶: 5m 28s

ğŸ“ å·²è®°å½•: add-eastmoney-fund-source
```

### 12.3 ç”Ÿæˆçš„ DAG DSL

```yaml
dag:
  name: add-eastmoney-fund-source
  workspace: ~/projects/daily-finance-auto
  session_prefix: daily_finance
  max_runtime: 1h
  
  tasks:
    - id: analyze
      type: opencode
      prompt: |
        åˆ†æç°æœ‰æ•°æ®æºæ¶æ„ï¼Œè®¾è®¡ä¸œè´¢åŸºé‡‘æ•°æ®æºçš„å®ç°æ–¹æ¡ˆã€‚
        éœ€è¦æ”¯æŒï¼šå…¬å‹ŸåŸºé‡‘å‡€å€¼ã€ç§å‹ŸåŸºé‡‘å‡€å€¼
        
    - id: implement
      type: opencode
      depends_on: [analyze]
      prompt: |
        æ ¹æ®åˆ†æç»“æœï¼Œå®ç°ä¸œè´¢åŸºé‡‘æ•°æ®æºï¼š
        1. åˆ›å»º src/sources/eastmoney_fund.py
        2. å®ç°å…¬å‹ŸåŸºé‡‘æ¥å£
        3. å®ç°ç§å‹ŸåŸºé‡‘æ¥å£
        4. æ›´æ–° config/sources.yaml
        
    - id: test
      type: opencode
      depends_on: [implement]
      prompt: |
        ä¸ºä¸œè´¢åŸºé‡‘æ•°æ®æºç¼–å†™å¹¶è¿è¡Œæµ‹è¯•
        
    - id: deploy
      type: bash
      depends_on: [test]
      command: |
        cd ~/projects/daily-finance-auto
        source .venv/bin/activate
        uv sync
        uv run python -m src.main --verify
```

---

## é™„å½•

### A. ç›¸å…³ PR

- [PR #16099](https://github.com/openclaw/openclaw/pull/16099): feat: add opencode-cli as CLI backend provider
- [PR #16087](https://github.com/openclaw/openclaw/pull/16087): docs: enhance OpenCode documentation in coding-agent skill

### B. å‚è€ƒèµ„æ–™

- OpenClaw CLI Backends: `/docs/gateway/cli-backends.md`
- OpenClaw Heartbeat: å®šæ—¶ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ
- OpenCode CLI: å¼€æº AI ç¼–ç¨‹åŠ©æ‰‹
